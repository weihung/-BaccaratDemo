window.__require=function e(a,t,c){function n(r,o){if(!t[r]){if(!a[r]){var l=r.split("/");if(l=l[l.length-1],!a[l]){var s="function"==typeof __require&&__require;if(!o&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}}var u=t[r]={exports:{}};a[r][0].call(u.exports,function(e){return n(a[r][1][e]||e)},u,u.exports,e,a,t,c)}return t[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<c.length;r++)n(c[r]);return n}({Balance:[function(e,a,t){"use strict";cc._RF.push(a,"f4a28llbdNIE5Y8mCvsLYmR","Balance");var c=e("Ws");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,balanceLabel:cc.Label},start:function(){var e=this;c.on("Balance",function(a){e.balanceLabel.string=(a.balance/100).toFixed(2),e.nameLabel.string=a.username})}}),cc._RF.pop()},{Ws:"Ws"}],Bet:[function(e,a,t){"use strict";cc._RF.push(a,"9ee1b+6RM9ETYFoHuyI5Wja","Bet");var c=e("Global"),n=e("Ws");cc.Class({extends:cc.Component,properties:{playerWinLayer:cc.Node,playerWinLayerHit:cc.Node,bankerWinLayer:cc.Node,bankerWinLayerHit:cc.Node,equalLayer:cc.Node,equalLayerHit:cc.Node,bigLayer:cc.Node,bigLayerHit:cc.Node,smallLayer:cc.Node,smallLayerHit:cc.Node,playerOddLayer:cc.Node,playerOddLayerHit:cc.Node,playerEvenLayer:cc.Node,playerEvenLayerHit:cc.Node,bankerOddLayer:cc.Node,bankerOddLayerHit:cc.Node,bankerEvenLayer:cc.Node,bankerEvenLayerHit:cc.Node,playerPairLayer:cc.Node,playerPairLayerHit:cc.Node,bankerPairLayer:cc.Node,bankerPairLayerHit:cc.Node,playerWinButton:cc.Button,bankerWinButton:cc.Button,equalButton:cc.Button,bigButton:cc.Button,smallButton:cc.Button,playerOddButton:cc.Button,playerEvenButton:cc.Button,bankerOddButton:cc.Button,bankerEvenButton:cc.Button,playerPairButton:cc.Button,bankerPairButton:cc.Button,playerWinLabel:cc.Label,bankerWinLabel:cc.Label,equalLabel:cc.Label,bigLabel:cc.Label,smallLabel:cc.Label,playerOddLabel:cc.Label,playerEvenLabel:cc.Label,bankerOddLabel:cc.Label,bankerEvenLabel:cc.Label,playerPairLabel:cc.Label,bankerPairLabel:cc.Label},onLoad:function(){var e=this;this.playerWinButton.node.on("click",function(){e.click("Player")},this),this.bankerWinButton.node.on("click",function(){e.click("Banker")},this),this.equalButton.node.on("click",function(){e.click("Equal")},this),this.bigButton.node.on("click",function(){e.click("Big")},this),this.smallButton.node.on("click",function(){e.click("Small")},this),this.playerOddButton.node.on("click",function(){e.click("PlayerOdd")},this),this.playerEvenButton.node.on("click",function(){e.click("PlayerEven")},this),this.bankerOddButton.node.on("click",function(){e.click("BankerOdd")},this),this.bankerEvenButton.node.on("click",function(){e.click("BankerEven")},this),this.playerPairButton.node.on("click",function(){e.click("PlayerPair")},this),this.bankerPairButton.node.on("click",function(){e.click("BankerPair")},this)},start:function(){var e=this;c.BetLayerReset=function(){e.reset()},n.on("Result",function(a){e.playerWinLayer.active=!a.player,e.playerWinLayerHit.active=a.player,e.bankerWinLayer.active=!a.banker,e.bankerWinLayerHit.active=a.banker,e.equalLayer.active=!a.equal,e.equalLayerHit.active=a.equal,e.bigLayer.active=!a.big,e.bigLayerHit.active=a.big,e.smallLayer.active=!a.small,e.smallLayerHit.active=a.small,e.playerOddLayer.active=!a.playerOdd,e.playerOddLayerHit.active=a.playerOdd,e.playerEvenLayer.active=!a.playerEven,e.playerEvenLayerHit.active=a.playerEven,e.bankerOddLayer.active=!a.bankerOdd,e.bankerOddLayerHit.active=a.bankerOdd,e.bankerEvenLayer.active=!a.bankerEven,e.bankerEvenLayerHit.active=a.bankerEven,e.playerPairLayer.active=!a.playerPair,e.playerPairLayerHit.active=a.playerPair,e.bankerPairLayer.active=!a.bankerPair,e.bankerPairLayerHit.active=a.bankerPair}),n.on("Bet",function(a){e.showLabel(a,"Player",e.playerWinLabel),e.showLabel(a,"Banker",e.bankerWinLabel),e.showLabel(a,"Equal",e.equalLabel),e.showLabel(a,"Big",e.bigLabel),e.showLabel(a,"Small",e.smallLabel),e.showLabel(a,"PlayerOdd",e.playerOddLabel),e.showLabel(a,"PlayerEven",e.playerEvenLabel),e.showLabel(a,"BankerOdd",e.bankerOddLabel),e.showLabel(a,"BankerEven",e.bankerEvenLabel),e.showLabel(a,"PlayerPair",e.playerPairLabel),e.showLabel(a,"BankerPair",e.bankerPairLabel)})},reset:function(){this.playerWinLayer.active=!0,this.playerWinLayerHit.active=!1,this.bankerWinLayer.active=!0,this.bankerWinLayerHit.active=!1,this.equalLayer.active=!0,this.equalLayerHit.active=!1,this.bigLayer.active=!0,this.bigLayerHit.active=!1,this.smallLayer.active=!0,this.smallLayerHit.active=!1,this.playerOddLayer.active=!0,this.playerOddLayerHit.active=!1,this.playerEvenLayer.active=!0,this.playerEvenLayerHit.active=!1,this.bankerOddLayer.active=!0,this.bankerOddLayerHit.active=!1,this.bankerEvenLayer.active=!0,this.bankerEvenLayerHit.active=!1,this.playerPairLayer.active=!0,this.playerPairLayerHit.active=!1,this.bankerPairLayer.active=!0,this.bankerPairLayerHit.active=!1},click:function(e){c.TokenIndex<0||n.send({cmd:"Bet",betType:e,tokenIndex:c.TokenIndex})},showLabel:function(e,a,t){var c=e.playerBet,n=e.allBet;if(c&&n){var i=(c[a]?c[a]/100:0)+" / "+(n[a]?n[a]/100:0);t.string=i}}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],ButtonScaler:[function(e,a,t){"use strict";cc._RF.push(a,"57afe4iMaVIaIqofpx7dT27","ButtonScaler");var c=e("Global");cc.Class({extends:cc.Component,properties:{pressedScale:1,transDuration:0,isToken:cc.Boolean},onLoad:function(){function e(e){c.TokenIndex<0&&!self.isToken||(this.stopAllActions(),this.runAction(self.scaleUpAction))}self=this,self.initScale=this.node.scale,self.button=self.getComponent(cc.Button),self.scaleDownAction=cc.scaleTo(self.transDuration,self.pressedScale),self.scaleUpAction=cc.scaleTo(self.transDuration,self.initScale),this.node.on("touchstart",function(e){c.TokenIndex<0&&!self.isToken||(this.stopAllActions(),this.runAction(self.scaleDownAction))},this.node),this.node.on("touchend",e,this.node),this.node.on("touchcancel",e,this.node)}}),cc._RF.pop()},{Global:"Global"}],CardPic:[function(e,a,t){"use strict";cc._RF.push(a,"67eb12L0dRBw4FTpxvrFDI6","CardPic"),cc.Class({extends:cc.Component,properties:{point:cc.Label,suit:cc.Sprite,mainPic:cc.Sprite,cardBG:cc.Sprite,redTextColor:cc.Color.WHITE,blackTextColor:cc.Color.WHITE,texFrontBG:cc.SpriteFrame,texBackBG:cc.SpriteFrame,texFaces:{default:[],type:cc.SpriteFrame},texSuitBig:{default:[],type:cc.SpriteFrame},texSuitSmall:{default:[],type:cc.SpriteFrame}},init:function(e){var a=e.point>10;this.mainPic.spriteFrame=a?this.texFaces[e.point-10-1]:this.texSuitBig[e.suit],this.point.string=e.pointName,e.isRedSuit?this.point.node.color=this.redTextColor:this.point.node.color=this.blackTextColor,this.suit.spriteFrame=this.texSuitSmall[e.suit]},reveal:function(e){this.point.node.active=e,this.suit.node.active=e,this.mainPic.node.active=e,this.cardBG.spriteFrame=e?this.texFrontBG:this.texBackBG}}),cc._RF.pop()},{}],Card:[function(e,a,t){"use strict";cc._RF.push(a,"36a9a0+czVFNKEUVUzcoXE1","Card");e("Global");var c=e("Ws"),n={H:1,D:3,S:0,C:2},i=["","A","2","3","4","5","6","7","8","9","10","J","Q","K"];cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardAnchors:{default:[],type:cc.Node},cardsLayer:cc.Node,countDownLayer:cc.Node},start:function(){var e=this;this.cardsLayer.active=!1,c.on("Deal",function(a){e.drawCard(a.cards),e.countDownLayer.active=!1})},drawCard:function(e){this.cardsLayer.active=!0;for(var a=0;a<6;a++)if(this.cardAnchors[a].removeAllChildren(),!(a>=e.length||"*"===e[a])){var t=e[a].substring(0,1),c=parseInt(e[a].substring(1)),r={point:c,pointName:i[c],isRedSuit:n[t]%2==1,suit:n[t]},o=cc.instantiate(this.cardPrefab);this.cardAnchors[a].addChild(o),o.position=cc.v2(0,0),o.getComponent("CardPic").init(r)}},update:function(e){}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],Config:[function(e,a,t){"use strict";cc._RF.push(a,"6bf2ays0BdGXITKx8nPWl1q","Config");a.exports={apiUrl:"https://blackjack21.hopto.org/v1/",webSocketUrl:"wss://blackjack21.hopto.org/v1/baccarat"},cc._RF.pop()},{}],CountDown:[function(e,a,t){"use strict";cc._RF.push(a,"e67aaSMx1RBHI5t2WZ5iENo","CountDown");var c=e("Ws"),n=e("Global");cc.Class({extends:cc.Component,properties:{countDownLayer:cc.Node,prepareLayer:cc.Node,betLayer:cc.Node,prepareLabel:cc.Label,betLabel:cc.Label,cardsLayer:cc.Node,tableBetLayer:cc.Node},start:function(){var e=this;this.countDownLayer.active=!1,c.on("CmdCountDownPrepare",function(a){n.BetLayerReset(),e.countDownLayer.active=!0,e.cardsLayer.active=!1,e.betLayer.active=!1,e.prepareLayer.active=a.seconds>0,e.prepareLabel.string=a.seconds}),c.on("CountDownBet",function(a){n.BetLayerReset(),e.countDownLayer.active=!0,e.cardsLayer.active=!1,e.prepareLayer.active=!1,e.betLayer.active=a.seconds>0,e.betLabel.string=a.seconds})}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],Global:[function(e,a,t){"use strict";cc._RF.push(a,"9f21cf450hHBL8G2YeXaqar","Global"),a.exports={},cc._RF.pop()},{}],Table:[function(e,a,t){"use strict";cc._RF.push(a,"a7e86IDbmpGdqs6SAdyjFw2","Table");var c=e("Global");cc.Class({extends:cc.Component,onLoad:function(){var e=new URLSearchParams(window.location.search);c.Token=e.get("t"),c.Cards=["D1","H5","S10","C12","D7","S8"],c.TokenIndex=-1},start:function(){},update:function(e){}}),cc._RF.pop()},{Global:"Global"}],TokenButton:[function(e,a,t){"use strict";cc._RF.push(a,"53a33+OcXFFErzLD2XjzKDG","TokenButton");var c=e("Global");cc.Class({extends:cc.Component,properties:{amount:cc.String,label:cc.Label,button:cc.Button,index:cc.Integer},onLoad:function(){this.label.string=this.amount,this.button.node.on("click",this.callback,this)},callback:function(e){c.BetAmount=parseInt(this.amount),c.TokenIndex=parseInt(this.index)},start:function(){}}),cc._RF.pop()},{Global:"Global"}],Token:[function(e,a,t){"use strict";cc._RF.push(a,"785a8aUJYVPNoAb7NfT4vlJ","Token");var c=e("Global");cc.Class({extends:cc.Component,properties:{amount:cc.String,labels:{default:[],type:cc.Label},coinSelectNodes:{default:[],type:cc.Node}},onLoad:function(){c.BetAmount=0,c.TokenIndex=-1},start:function(){},update:function(e){for(var a=0;a<this.labels.length;a++)this.coinSelectNodes[a].active=parseInt(this.labels[a].string)===c.BetAmount}}),cc._RF.pop()},{Global:"Global"}],Ws:[function(e,a,t){"use strict";cc._RF.push(a,"5eeeeggaMRLDrN+tbQlJIx9","Ws");var c,n,i,r=e("Global"),o=e("./config").webSocketUrl,l={};(function e(){(c=new WebSocket(o)).onopen=function(){console.log("connection open"),clearInterval(n),clearTimeout(i),c.send(JSON.stringify({cmd:"Join",table:0}))},c.onclose=function(){console.log("close connection"),setTimeout(function(){e()},1e3),clearInterval(n),clearTimeout(i)},c.onmessage=function(e){console.log(e);var a=JSON.parse(e.data);if(!(a.cmd.status<1))return"GameEnd"===a.cmd?(l.Deal&&l.Deal({cards:a.cards}),void(l.Result&&l.Result(a.result))):void(l[a.cmd]&&l[a.cmd](a))}})(),a.exports={on:function(e,a){l[e]=a},send:function(e){e.token=r.token,c.send(JSON.stringify(e))},reset:function(){l={}}},cc._RF.pop()},{"./config":"Config",Global:"Global"}]},{},["Balance","Bet","ButtonScaler","Card","CardPic","Config","CountDown","Global","Table","Token","TokenButton","Ws"]);