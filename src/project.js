window.__require=function t(e,c,n){function o(i,s){if(!c[i]){if(!e[i]){var r=i.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+i+"'")}}var u=c[i]={exports:{}};e[i][0].call(u.exports,function(t){return o(e[i][1][t]||t)},u,u.exports,t,e,c,n)}return c[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)o(n[i]);return o}({ButtonScaler:[function(t,e,c){"use strict";cc._RF.push(e,"57afe4iMaVIaIqofpx7dT27","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1,transDuration:0},onLoad:function(){function t(t){this.stopAllActions(),this.runAction(self.scaleUpAction)}self=this,self.initScale=this.node.scale,self.button=self.getComponent(cc.Button),self.scaleDownAction=cc.scaleTo(self.transDuration,self.pressedScale),self.scaleUpAction=cc.scaleTo(self.transDuration,self.initScale),this.node.on("touchstart",function(t){this.stopAllActions(),this.runAction(self.scaleDownAction)},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],CardPic:[function(t,e,c){"use strict";cc._RF.push(e,"67eb12L0dRBw4FTpxvrFDI6","CardPic"),cc.Class({extends:cc.Component,properties:{point:cc.Label,suit:cc.Sprite,mainPic:cc.Sprite,cardBG:cc.Sprite,redTextColor:cc.Color.WHITE,blackTextColor:cc.Color.WHITE,texFrontBG:cc.SpriteFrame,texBackBG:cc.SpriteFrame,texFaces:{default:[],type:cc.SpriteFrame},texSuitBig:{default:[],type:cc.SpriteFrame},texSuitSmall:{default:[],type:cc.SpriteFrame}},init:function(t){var e=t.point>10;this.mainPic.spriteFrame=e?this.texFaces[t.point-10-1]:this.texSuitBig[t.suit],this.point.string=t.pointName,t.isRedSuit?this.point.node.color=this.redTextColor:this.point.node.color=this.blackTextColor,this.suit.spriteFrame=this.texSuitSmall[t.suit]},reveal:function(t){this.point.node.active=t,this.suit.node.active=t,this.mainPic.node.active=t,this.cardBG.spriteFrame=t?this.texFrontBG:this.texBackBG}}),cc._RF.pop()},{}],Card:[function(t,e,c){"use strict";cc._RF.push(e,"36a9a0+czVFNKEUVUzcoXE1","Card");t("Global");var n=t("Ws"),o={H:1,D:3,S:0,C:2},a=["","A","2","3","4","5","6","7","8","9","10","J","Q","K"];cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardAnchors:{default:[],type:cc.Node},cardsLayer:cc.Node,countDownLayer:cc.Node},start:function(){var t=this;this.cardsLayer.active=!1,n.on("Deal",function(e){t.drawCard(e.cards),t.countDownLayer.active=!1})},drawCard:function(t){this.cardsLayer.active=!0;for(var e=0;e<6;e++)if(this.cardAnchors[e].removeAllChildren(),!(e>=t.length||"*"===t[e])){var c=t[e].substring(0,1),n=parseInt(t[e].substring(1)),i={point:n,pointName:a[n],isRedSuit:o[c]%2==1,suit:o[c]},s=cc.instantiate(this.cardPrefab);this.cardAnchors[e].addChild(s),s.position=cc.v2(0,0),s.getComponent("CardPic").init(i)}},update:function(t){}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],Config:[function(t,e,c){"use strict";cc._RF.push(e,"6bf2ays0BdGXITKx8nPWl1q","Config");e.exports={apiUrl:"https://blackjack21.hopto.org/v1/",webSocketUrl:"wss://blackjack21.hopto.org/v1/baccarat"},cc._RF.pop()},{}],CountDown:[function(t,e,c){"use strict";cc._RF.push(e,"e67aaSMx1RBHI5t2WZ5iENo","CountDown");var n=t("Ws");cc.Class({extends:cc.Component,properties:{countDownLayer:cc.Node,prepareLayer:cc.Node,betLayer:cc.Node,prepareLabel:cc.Label,betLabel:cc.Label,cardsLayer:cc.Node},start:function(){var t=this;this.countDownLayer.active=!1,n.on("CmdCountDownPrepare",function(e){t.countDownLayer.active=!0,t.cardsLayer.active=!1,t.betLayer.active=!1,t.prepareLayer.active=e.seconds>0,t.prepareLabel.string=e.seconds}),n.on("CountDownBet",function(e){t.countDownLayer.active=!0,t.cardsLayer.active=!1,t.prepareLayer.active=!1,t.betLayer.active=e.seconds>0,t.betLabel.string=e.seconds})}}),cc._RF.pop()},{Ws:"Ws"}],Global:[function(t,e,c){"use strict";cc._RF.push(e,"9f21cf450hHBL8G2YeXaqar","Global"),e.exports={},cc._RF.pop()},{}],Table:[function(t,e,c){"use strict";cc._RF.push(e,"a7e86IDbmpGdqs6SAdyjFw2","Table");var n=t("Global");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){n.Balance=0,n.Username="Player";var t=new URLSearchParams(window.location.search);n.Token=t.get("t"),n.Cards=["D1","H5","S10","C12","D7","S8"]},start:function(){},update:function(t){this.nameLabel.string=n.Username,this.balanceLabel.string=n.Balance}}),cc._RF.pop()},{Global:"Global"}],TokenButton:[function(t,e,c){"use strict";cc._RF.push(e,"53a33+OcXFFErzLD2XjzKDG","TokenButton");var n=t("Global");cc.Class({extends:cc.Component,properties:{amount:cc.String,label:cc.Label,button:cc.Button},onLoad:function(){this.label.string=this.amount,this.button.node.on("click",this.callback,this)},callback:function(t){n.BetAmount=parseInt(this.amount)},start:function(){}}),cc._RF.pop()},{Global:"Global"}],Token:[function(t,e,c){"use strict";cc._RF.push(e,"785a8aUJYVPNoAb7NfT4vlJ","Token");var n=t("Global");cc.Class({extends:cc.Component,properties:{amount:cc.String,labels:{default:[],type:cc.Label},coinSelectNodes:{default:[],type:cc.Node}},onLoad:function(){n.BetAmount=0},start:function(){},update:function(t){for(var e=0;e<this.labels.length;e++)this.coinSelectNodes[e].active=parseInt(this.labels[e].string)===n.BetAmount}}),cc._RF.pop()},{Global:"Global"}],Ws:[function(t,e,c){"use strict";cc._RF.push(e,"5eeeeggaMRLDrN+tbQlJIx9","Ws");var n,o,a,i=t("Global"),s=t("./config").webSocketUrl,r={};(function t(){(n=new WebSocket(s)).onopen=function(){console.log("connection open"),clearInterval(o),clearTimeout(a),n.send(JSON.stringify({cmd:"Join",table:0}))},n.onclose=function(){console.log("close connection"),setTimeout(function(){t()},1e3),clearInterval(o),clearTimeout(a)},n.onmessage=function(t){console.log(t);var e=JSON.parse(t.data);r[e.cmd]&&r[e.cmd](e)}})(),e.exports={on:function(t,e){r[t]=e},send:function(t){t.token=i.token,n.send(JSON.stringify(t))},reset:function(){r={}}},cc._RF.pop()},{"./config":"Config",Global:"Global"}]},{},["ButtonScaler","Card","CardPic","Config","CountDown","Global","Table","Token","TokenButton","Ws"]);