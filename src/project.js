window.__require=function e(t,a,c){function r(n,o){if(!a[n]){if(!t[n]){var s=n.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+n+"'")}}var d=a[n]={exports:{}};t[n][0].call(d.exports,function(e){return r(t[n][1][e]||e)},d,d.exports,e,t,a,c)}return a[n].exports}for(var i="function"==typeof __require&&__require,n=0;n<c.length;n++)r(c[n]);return r}({Bet:[function(e,t,a){"use strict";cc._RF.push(t,"9ee1b+6RM9ETYFoHuyI5Wja","Bet");var c=e("Global"),r=e("Ws");cc.Class({extends:cc.Component,properties:{playerWinLayer:cc.Node,playerWinLayerHit:cc.Node,bankerWinLayer:cc.Node,bankerWinLayerHit:cc.Node,equalLayer:cc.Node,equalLayerHit:cc.Node,bigLayer:cc.Node,bigLayerHit:cc.Node,smallLayer:cc.Node,smallLayerHit:cc.Node,playerOddLayer:cc.Node,playerOddLayerHit:cc.Node,playerEvenLayer:cc.Node,playerEvenLayerHit:cc.Node,bankerOddLayer:cc.Node,bankerOddLayerHit:cc.Node,bankerEvenLayer:cc.Node,bankerEvenLayerHit:cc.Node,playerPairLayer:cc.Node,playerPairLayerHit:cc.Node,bankerPairLayer:cc.Node,bankerPairLayerHit:cc.Node},start:function(){var e=this;c.BetLayerReset=function(){e.reset()},r.on("Result",function(t){console.log(t),e.playerWinLayer.active=!t.player,e.playerWinLayerHit.active=t.player,e.bankerWinLayer.active=!t.banker,e.bankerWinLayerHit.active=t.banker,e.equalLayer.active=!t.equal,e.equalLayerHit.active=t.equal,e.bigLayer.active=!t.big,e.bigLayerHit.active=t.big,e.smallLayer.active=!t.small,e.smallLayerHit.active=t.small,e.playerOddLayer.active=!t.playerOdd,e.playerOddLayerHit.active=t.playerOdd,e.playerEvenLayer.active=!t.playerEven,e.playerEvenLayerHit.active=t.playerEven,e.bankerOddLayer.active=!t.bankerOdd,e.bankerOddLayerHit.active=t.bankerOdd,e.bankerEvenLayer.active=!t.bankerEven,e.bankerEvenLayerHit.active=t.bankerEven,e.playerPairLayer.active=!t.playerPair,e.playerPairLayerHit.active=t.playerPair,e.bankerPairLayer.active=!t.bankerPair,e.bankerPairLayerHit.active=t.bankerPair})},reset:function(){this.playerWinLayer.active=!0,this.playerWinLayerHit.active=!1,this.bankerWinLayer.active=!0,this.bankerWinLayerHit.active=!1,this.equalLayer.active=!0,this.equalLayerHit.active=!1,this.bigLayer.active=!0,this.bigLayerHit.active=!1,this.smallLayer.active=!0,this.smallLayerHit.active=!1,this.playerOddLayer.active=!0,this.playerOddLayerHit.active=!1,this.playerEvenLayer.active=!0,this.playerEvenLayerHit.active=!1,this.bankerOddLayer.active=!0,this.bankerOddLayerHit.active=!1,this.bankerEvenLayer.active=!0,this.bankerEvenLayerHit.active=!1,this.playerPairLayer.active=!0,this.playerPairLayerHit.active=!1,this.bankerPairLayer.active=!0,this.bankerPairLayerHit.active=!1}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],ButtonScaler:[function(e,t,a){"use strict";cc._RF.push(t,"57afe4iMaVIaIqofpx7dT27","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1,transDuration:0},onLoad:function(){function e(e){this.stopAllActions(),this.runAction(self.scaleUpAction)}self=this,self.initScale=this.node.scale,self.button=self.getComponent(cc.Button),self.scaleDownAction=cc.scaleTo(self.transDuration,self.pressedScale),self.scaleUpAction=cc.scaleTo(self.transDuration,self.initScale),this.node.on("touchstart",function(e){this.stopAllActions(),this.runAction(self.scaleDownAction)},this.node),this.node.on("touchend",e,this.node),this.node.on("touchcancel",e,this.node)}}),cc._RF.pop()},{}],CardPic:[function(e,t,a){"use strict";cc._RF.push(t,"67eb12L0dRBw4FTpxvrFDI6","CardPic"),cc.Class({extends:cc.Component,properties:{point:cc.Label,suit:cc.Sprite,mainPic:cc.Sprite,cardBG:cc.Sprite,redTextColor:cc.Color.WHITE,blackTextColor:cc.Color.WHITE,texFrontBG:cc.SpriteFrame,texBackBG:cc.SpriteFrame,texFaces:{default:[],type:cc.SpriteFrame},texSuitBig:{default:[],type:cc.SpriteFrame},texSuitSmall:{default:[],type:cc.SpriteFrame}},init:function(e){var t=e.point>10;this.mainPic.spriteFrame=t?this.texFaces[e.point-10-1]:this.texSuitBig[e.suit],this.point.string=e.pointName,e.isRedSuit?this.point.node.color=this.redTextColor:this.point.node.color=this.blackTextColor,this.suit.spriteFrame=this.texSuitSmall[e.suit]},reveal:function(e){this.point.node.active=e,this.suit.node.active=e,this.mainPic.node.active=e,this.cardBG.spriteFrame=e?this.texFrontBG:this.texBackBG}}),cc._RF.pop()},{}],Card:[function(e,t,a){"use strict";cc._RF.push(t,"36a9a0+czVFNKEUVUzcoXE1","Card");e("Global");var c=e("Ws"),r={H:1,D:3,S:0,C:2},i=["","A","2","3","4","5","6","7","8","9","10","J","Q","K"];cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardAnchors:{default:[],type:cc.Node},cardsLayer:cc.Node,countDownLayer:cc.Node},start:function(){var e=this;this.cardsLayer.active=!1,c.on("Deal",function(t){e.drawCard(t.cards),e.countDownLayer.active=!1})},drawCard:function(e){this.cardsLayer.active=!0;for(var t=0;t<6;t++)if(this.cardAnchors[t].removeAllChildren(),!(t>=e.length||"*"===e[t])){var a=e[t].substring(0,1),c=parseInt(e[t].substring(1)),n={point:c,pointName:i[c],isRedSuit:r[a]%2==1,suit:r[a]},o=cc.instantiate(this.cardPrefab);this.cardAnchors[t].addChild(o),o.position=cc.v2(0,0),o.getComponent("CardPic").init(n)}},update:function(e){}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],Config:[function(e,t,a){"use strict";cc._RF.push(t,"6bf2ays0BdGXITKx8nPWl1q","Config");t.exports={apiUrl:"https://blackjack21.hopto.org/v1/",webSocketUrl:"wss://blackjack21.hopto.org/v1/baccarat"},cc._RF.pop()},{}],CountDown:[function(e,t,a){"use strict";cc._RF.push(t,"e67aaSMx1RBHI5t2WZ5iENo","CountDown");var c=e("Ws"),r=e("Global");cc.Class({extends:cc.Component,properties:{countDownLayer:cc.Node,prepareLayer:cc.Node,betLayer:cc.Node,prepareLabel:cc.Label,betLabel:cc.Label,cardsLayer:cc.Node,tableBetLayer:cc.Node},start:function(){var e=this;this.countDownLayer.active=!1,c.on("CmdCountDownPrepare",function(t){r.BetLayerReset(),e.countDownLayer.active=!0,e.cardsLayer.active=!1,e.betLayer.active=!1,e.prepareLayer.active=t.seconds>0,e.prepareLabel.string=t.seconds}),c.on("CountDownBet",function(t){r.BetLayerReset(),e.countDownLayer.active=!0,e.cardsLayer.active=!1,e.prepareLayer.active=!1,e.betLayer.active=t.seconds>0,e.betLabel.string=t.seconds})}}),cc._RF.pop()},{Global:"Global",Ws:"Ws"}],Global:[function(e,t,a){"use strict";cc._RF.push(t,"9f21cf450hHBL8G2YeXaqar","Global"),t.exports={},cc._RF.pop()},{}],Table:[function(e,t,a){"use strict";cc._RF.push(t,"a7e86IDbmpGdqs6SAdyjFw2","Table");var c=e("Global");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){c.Balance=0,c.Username="Player";var e=new URLSearchParams(window.location.search);c.Token=e.get("t"),c.Cards=["D1","H5","S10","C12","D7","S8"]},start:function(){},update:function(e){this.nameLabel.string=c.Username,this.balanceLabel.string=c.Balance}}),cc._RF.pop()},{Global:"Global"}],TokenButton:[function(e,t,a){"use strict";cc._RF.push(t,"53a33+OcXFFErzLD2XjzKDG","TokenButton");var c=e("Global");cc.Class({extends:cc.Component,properties:{amount:cc.String,label:cc.Label,button:cc.Button},onLoad:function(){this.label.string=this.amount,this.button.node.on("click",this.callback,this)},callback:function(e){c.BetAmount=parseInt(this.amount)},start:function(){}}),cc._RF.pop()},{Global:"Global"}],Token:[function(e,t,a){"use strict";cc._RF.push(t,"785a8aUJYVPNoAb7NfT4vlJ","Token");var c=e("Global");cc.Class({extends:cc.Component,properties:{amount:cc.String,labels:{default:[],type:cc.Label},coinSelectNodes:{default:[],type:cc.Node}},onLoad:function(){c.BetAmount=0},start:function(){},update:function(e){for(var t=0;t<this.labels.length;t++)this.coinSelectNodes[t].active=parseInt(this.labels[t].string)===c.BetAmount}}),cc._RF.pop()},{Global:"Global"}],Ws:[function(e,t,a){"use strict";cc._RF.push(t,"5eeeeggaMRLDrN+tbQlJIx9","Ws");var c,r,i,n=e("Global"),o=e("./config").webSocketUrl,s={};(function e(){(c=new WebSocket(o)).onopen=function(){console.log("connection open"),clearInterval(r),clearTimeout(i),c.send(JSON.stringify({cmd:"Join",table:0}))},c.onclose=function(){console.log("close connection"),setTimeout(function(){e()},1e3),clearInterval(r),clearTimeout(i)},c.onmessage=function(e){console.log(e);var t=JSON.parse(e.data);if(!(t.cmd.status<1))return"GameEnd"===t.cmd?(s.Deal&&s.Deal({cards:t.cards}),void(s.Result&&s.Result(t.result))):void(s[t.cmd]&&s[t.cmd](t))}})(),t.exports={on:function(e,t){s[e]=t},send:function(e){e.token=n.token,c.send(JSON.stringify(e))},reset:function(){s={}}},cc._RF.pop()},{"./config":"Config",Global:"Global"}]},{},["Bet","ButtonScaler","Card","CardPic","Config","CountDown","Global","Table","Token","TokenButton","Ws"]);